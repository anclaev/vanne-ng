<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Vanne</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Vanne</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li>Components</li>
  <li
  >
  ProfileComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
        <li >
            <a href="#templateData" role="tab" id="templateData-tab" data-toggle="tab" data-link="template">Template</a>
        </li>
        <li >
            <a href="#styleData" role="tab" id="styleData-tab" data-toggle="tab" data-link="style">Styles</a>
        </li>
        <li >
            <a href="#tree" role="tab" id="tree-tab" data-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/users/profile/profile.component.ts</code>
</p>


    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>Компонент профиля пользователя</p>

    </p>


    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                    <code><a href="https://angular.io/api/core/OnInit" target="_blank" >OnInit</a></code>
                    <code><a href="https://angular.io/api/core/OnDestroy" target="_blank" >OnDestroy</a></code>
    </p>


<section>
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>









            <tr>
                <td class="col-md-3">providers</td>
                <td class="col-md-9">
                            <code>{
    provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE, MAT_MOMENT_DATE_ADAPTER_OPTIONS],
}</code>
                                <code><a href="../miscellaneous/variables.html#MY_FORMATS" target="_self" >{ provide: MAT_DATE_FORMATS, useValue: MY_FORMATS }</a></code>
                            <code>{ provide: MAT_DATE_LOCALE, useValue:  }</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>vanne-profile</code></td>
            </tr>

            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./profile.component.sass</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./profile.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#acceptUploadSub" >acceptUploadSub</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#authSub" >authSub</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#avatarTypes" >avatarTypes</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changedBirthday$$" >changedBirthday$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changedEmail$$" >changedEmail$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changedLogin$$" >changedLogin$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changedPhone$$" >changedPhone$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changedUsername$$" >changedUsername$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#isFailedChangeEvent" >isFailedChangeEvent</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isMe" >isMe</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isOnline" >isOnline</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#otherChangeSubs" >otherChangeSubs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#profile$$" >profile$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#profileForm" >profileForm</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#profileQuery" >profileQuery</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#profileSub" >profileSub</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#supervisedByAdmin$$" >supervisedByAdmin$$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#uploadProgress" >uploadProgress</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#uploadSub" >uploadSub</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#cancelUpload" >cancelUpload</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changeBirthday" >changeBirthday</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changeEmail" >changeEmail</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changeLogin" >changeLogin</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changePhone" >changePhone</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#changeUsername" >changeUsername</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangeBirthday" >handleChangeBirthday</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangeEmail" >handleChangeEmail</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangeLogin" >handleChangeLogin</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangePass" >handleChangePass</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangePhone" >handleChangePhone</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleChangeUsername" >handleChangeUsername</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleClickFile" >handleClickFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#handleSelectFile" >handleSelectFile</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#mutate" >mutate</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#reset" >reset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#translateRole" >translateRole</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#uploadAvatar" >uploadAvatar</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

    <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(authService: <a href="../injectables/AuthService.html" target="_self">AuthService</a>, toastService: <a href="../injectables/ToastService.html" target="_self">ToastService</a>, apolloService: Apollo, titleService: <a href="https://angular.io/api/platform-browser/Title" target="_blank">Title</a>, routerService: <a href="https://angular.io/api/router/Router" target="_blank">Router</a>, route: <a href="https://angular.io/api/router/ActivatedRoute" target="_blank">ActivatedRoute</a>, httpClient: <a href="https://angular.io/api/common/http/HttpClient" target="_blank">HttpClient</a>, dialogService: MatDialog)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="231" class="link-to-prism">src/app/users/profile/profile.component.ts:231</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Конструктор компонента аккаунта</p>
</div>
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>authService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthService.html" target="_self" >AuthService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Сервис авторизации</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>toastService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ToastService.html" target="_self" >ToastService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Сервис уведомлений</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>apolloService</td>
                                                  
                                                        <td>
                                                                    <code>Apollo</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Сервис Apollo</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>titleService</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/platform-browser/Title" target="_blank" >Title</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Сервис заголовка страницы</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>routerService</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/router/Router" target="_blank" >Router</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Сервис роутинга</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>route</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/router/ActivatedRoute" target="_blank" >ActivatedRoute</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Текущий маршрут приложения</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>httpClient</td>
                                                  
                                                        <td>
                                                                        <code><a href="https://angular.io/api/common/http/HttpClient" target="_blank" >HttpClient</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>HTTP-клиент</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>dialogService</td>
                                                  
                                                        <td>
                                                                    <code>MatDialog</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>





    <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cancelUpload"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>cancelUpload</b></span>
                        <a href="#cancelUpload"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>cancelUpload()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="966"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:966</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Метод отмены загрузки аватара</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeBirthday"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changeBirthday</b></span>
                        <a href="#changeBirthday"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changeBirthday(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="763"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:763</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка изменения даты рождения</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение даты рождения</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeEmail"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changeEmail</b></span>
                        <a href="#changeEmail"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changeEmail(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="679"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:679</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка изменения email</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение email</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeLogin"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changeLogin</b></span>
                        <a href="#changeLogin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changeLogin(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="450"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:450</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка изменения логина</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение логина</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changePhone"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changePhone</b></span>
                        <a href="#changePhone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changePhone(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="588"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:588</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка изменения своего мобильного номера</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение мобильного номера</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changeUsername"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>changeUsername</b></span>
                        <a href="#changeUsername"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>changeUsername(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="520"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:520</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка изменения имени пользователя</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение имени пользователя</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangeBirthday"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangeBirthday</b></span>
                        <a href="#handleChangeBirthday"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangeBirthday(val: Moment)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="752"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:752</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка события изменения даты рождения</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                            <code>Moment</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение даты рождения</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangeEmail"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangeEmail</b></span>
                        <a href="#handleChangeEmail"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangeEmail(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="667"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:667</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка события изменения email</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение email</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangeLogin"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangeLogin</b></span>
                        <a href="#handleChangeLogin"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangeLogin(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="438"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:438</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка события изменения логина</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение логина</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangePass"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangePass</b></span>
                        <a href="#handleChangePass"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangePass()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="843"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:843</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка клика на смену пароля</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangePhone"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangePhone</b></span>
                        <a href="#handleChangePhone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangePhone(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="576"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:576</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка события изменения мобильного номера</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение мобильного номера</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleChangeUsername"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleChangeUsername</b></span>
                        <a href="#handleChangeUsername"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleChangeUsername(val: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="508"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:508</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработка события изменения имени пользователя</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>val</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Новое значение имени пользователя</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleClickFile"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleClickFile</b></span>
                        <a href="#handleClickFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleClickFile(event: <a href="https://angular.io/api/router/Event" target="_blank">Event</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="852"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:852</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработчик клика для смены аватара</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>event</td>
                                    <td>
                                                <code><a href="https://angular.io/api/router/Event" target="_blank" >Event</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleSelectFile"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>handleSelectFile</b></span>
                        <a href="#handleSelectFile"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleSelectFile(event: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="865"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:865</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Обработчик выбора файла для загрузки</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>event</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Событие выбора</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mutate"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>mutate</b></span>
                        <a href="#mutate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mutate(mutation: TypedDocumentNode<TResult | TVars>, variables: TVars)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="901"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:901</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>TResult</li>
                        <li>TVars</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Абстрактный метод изменения данных профиля</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>mutation</td>
                                    <td>
                                            <code>TypedDocumentNode&lt;TResult | TVars&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Мутация в виде gql</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>variables</td>
                                    <td>
                                            <code>TVars</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Объект с переменными запроса</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;MutationResult&lt;TResult&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Observable GraphQL-запроса на мутацию</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="991"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:991</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отмена подписки на изменение аккаунта при размонтировании компонента</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnInit()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="298"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:298</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Метод получения аккаунта при инициализации компонента</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="reset"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>reset</b></span>
                        <a href="#reset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>reset()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="983"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:983</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Откат загрузки</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="translateRole"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>translateRole</b></span>
                        <a href="#translateRole"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>translateRole(role: <a href="../undefineds/ROLE.html" target="_self">ROLE</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="976"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:976</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Метод локализации роли</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#ROLE" target="_self" >ROLE</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Системная роль пользователя</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        <p>Русифицированная роль</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="uploadAvatar"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>uploadAvatar</b></span>
                        <a href="#uploadAvatar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>uploadAvatar(file: File)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="915"
                            class="link-to-prism">src/app/users/profile/profile.component.ts:915</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Метод загрузки аватара</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>file</td>
                                    <td>
                                            <code>File</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>Выбранный файл</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="acceptUploadSub"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>acceptUploadSub</b></span>
                        <a href="#acceptUploadSub"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="223" class="link-to-prism">src/app/users/profile/profile.component.ts:223</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Подписка на подтверждение загрузки аватара</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="authSub"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>authSub</b></span>
                        <a href="#authSub"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="226" class="link-to-prism">src/app/users/profile/profile.component.ts:226</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Подписка на обновление авторизационных данных аккаунта</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="avatarTypes"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>avatarTypes</b></span>
                        <a href="#avatarTypes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>imageMimeTypes.join(&#x27;,&#x27;)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="200" class="link-to-prism">src/app/users/profile/profile.component.ts:200</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Разрешённые типы файла</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changedBirthday$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>changedBirthday$$</b></span>
                        <a href="#changedBirthday$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;Moment&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;Moment&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="195" class="link-to-prism">src/app/users/profile/profile.component.ts:195</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отслеживаемая дата рождения</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changedEmail$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>changedEmail$$</b></span>
                        <a href="#changedEmail$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="190" class="link-to-prism">src/app/users/profile/profile.component.ts:190</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отслеживаемый email</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changedLogin$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>changedLogin$$</b></span>
                        <a href="#changedLogin$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="175" class="link-to-prism">src/app/users/profile/profile.component.ts:175</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отслеживаемый логин</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changedPhone$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>changedPhone$$</b></span>
                        <a href="#changedPhone$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="185" class="link-to-prism">src/app/users/profile/profile.component.ts:185</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отслеживаемый мобильный номер</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="changedUsername$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>changedUsername$$</b></span>
                        <a href="#changedUsername$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;string&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;string&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="180" class="link-to-prism">src/app/users/profile/profile.component.ts:180</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Отслеживаемое имя пользователя</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isFailedChangeEvent"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>isFailedChangeEvent</b></span>
                        <a href="#isFailedChangeEvent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="208" class="link-to-prism">src/app/users/profile/profile.component.ts:208</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Флаг ошибки изменения данных</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isMe"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>isMe</b></span>
                        <a href="#isMe"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="128" class="link-to-prism">src/app/users/profile/profile.component.ts:128</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Флаг владения этим аккаунтом</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isOnline"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>isOnline</b></span>
                        <a href="#isOnline"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="123" class="link-to-prism">src/app/users/profile/profile.component.ts:123</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Флаг онлайна пользователя</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="otherChangeSubs"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>otherChangeSubs</b></span>
                        <a href="#otherChangeSubs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="231" class="link-to-prism">src/app/users/profile/profile.component.ts:231</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Массив вторичных подписок внутри методов изменения</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="profile$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>profile$$</b></span>
                        <a href="#profile$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/IAccount.html" target="_self" >BehaviorSubject&lt;IAccount&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="110" class="link-to-prism">src/app/users/profile/profile.component.ts:110</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Текущие данные профиля</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="profileForm"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>profileForm</b></span>
                        <a href="#profileForm"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new FormGroup({
    username: new FormControl(
      { value: &#x27;&#x27;, disabled: true },
      {
        validators: [
          Validators.required,
          Validators.minLength(4),
          Validators.pattern(
            /^[A-Z, А-Я][a-z, а-я, ё]+\s[A-Z, А-Я][a-z, а-я, ё]+$/,
          ),
        ],
      },
    ),
    login: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.minLength(4),
      Validators.pattern(/^[A-Z, a-z, 0-9]+\S$/),
    ]),
    email: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.email,
      Validators.minLength(6),
    ]),
    phone: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.minLength(6),
      Validators.pattern(/^\d{1,1}\s\d{3,3}\s\d{3,3}\s\d{2,2}\s\d{2,2}$/),
    ]),
    birthday: new FormControl(
      { value: &#x27;&#x27;, disabled: true },
      Validators.required,
    ),
  })</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="133" class="link-to-prism">src/app/users/profile/profile.component.ts:133</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Форма профиля</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="profileQuery"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>profileQuery</b></span>
                        <a href="#profileQuery"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>QueryRef&lt;literal type | literal type&gt; | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="115" class="link-to-prism">src/app/users/profile/profile.component.ts:115</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Запрос на получение профиля</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="profileSub"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>profileSub</b></span>
                        <a href="#profileSub"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="213" class="link-to-prism">src/app/users/profile/profile.component.ts:213</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Подписка на изменение данных аккаунта</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="supervisedByAdmin$$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>supervisedByAdmin$$</b></span>
                        <a href="#supervisedByAdmin$$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subject&lt;boolean&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new Subject&lt;boolean&gt;()</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="170" class="link-to-prism">src/app/users/profile/profile.component.ts:170</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Флаг просмотра администратором</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="uploadProgress"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>uploadProgress</b></span>
                        <a href="#uploadProgress"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="205" class="link-to-prism">src/app/users/profile/profile.component.ts:205</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Прогресс загрузки файла</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="uploadSub"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>uploadSub</b></span>
                        <a href="#uploadSub"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="218" class="link-to-prism">src/app/users/profile/profile.component.ts:218</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Подписка на загрузку аватара</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  DateAdapter,
  MAT_DATE_FORMATS,
  MAT_DATE_LOCALE,
} from &#x27;@angular/material/core&#x27;

import { MatDialog } from &#x27;@angular/material/dialog&#x27;

import {
  MomentDateAdapter,
  MAT_MOMENT_DATE_ADAPTER_OPTIONS,
} from &#x27;@angular/material-moment-adapter&#x27;

import {
  BehaviorSubject,
  catchError,
  debounceTime,
  finalize,
  Observable,
  of,
  Subject,
  Subscription,
} from &#x27;rxjs&#x27;

import { FormControl, FormGroup, Validators } from &#x27;@angular/forms&#x27;

import { HttpClient, HttpEventType } from &#x27;@angular/common/http&#x27;
import { Component, OnDestroy, OnInit } from &#x27;@angular/core&#x27;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;
import { Title } from &#x27;@angular/platform-browser&#x27;

import {
  Apollo,
  MutationResult,
  QueryRef,
  TypedDocumentNode,
} from &#x27;apollo-angular&#x27;

import moment, { Moment } from &#x27;moment&#x27;

import { ToastService } from &#x27;@shared/services/toast.service&#x27;
import { AuthService } from &#x27;@shared/services/auth.service&#x27;

import { inOutComponentAnimation } from &#x27;@/common/animations/in-out-component&#x27;
import { IAccount, initialAccount } from &#x27;@/common/models/account&#x27;
import { IUpload } from &#x27;@/common/interfaces/upload.interface&#x27;
import { GET_PROFILE } from &#x27;@common/schemes/query/getProfile&#x27;
import { imageMimeTypes, IntlRole } from &#x27;@/common&#x27;
import { API, ROLE } from &#x27;@/common/enums&#x27;

import {
  CHANGE_YOURSELF_PHONE,
  CHANGE_YOURSELF_BIRTHDAY,
  CHANGE_YOURSELF_EMAIL,
} from &#x27;@/common/schemes/mutation/changeYourself&#x27;

import {
  CHANGE_LOGIN,
  CHANGE_USERNAME,
  CHANGE_BIRTHDAY,
  CHANGE_EMAIL,
  CHANGE_PHONE,
} from &#x27;@/common/schemes/mutation/changeAccount&#x27;

import { ENV } from &#x27;@/environments/env&#x27;
import { ChangePassComponent } from &#x27;./change-pass/change-pass.component&#x27;

/**
 * Параметры форматирования даты
 */
const MY_FORMATS &#x3D; {
  parse: {
    dateInput: &#x27;LL&#x27;,
  },
  display: {
    dateInput: &#x27;DD MMMM, YYYY&#x27;,
    monthYearLabel: &#x27;MMMM YYYY&#x27;,
    dateA11yLabel: &#x27;LL&#x27;,
    monthYearA11yLabel: &#x27;MMMM YYYY&#x27;,
  },
}

/**
 * Задержка изменения поля в милисекундах
 */
const CHANGE_TIMEOUT &#x3D; 2000

/**
 * Компонент профиля пользователя
 */
@Component({
  selector: &#x27;vanne-profile&#x27;,
  templateUrl: &#x27;./profile.component.html&#x27;,
  styleUrls: [&#x27;./profile.component.sass&#x27;],
  providers: [
    {
      provide: DateAdapter,
      useClass: MomentDateAdapter,
      deps: [MAT_DATE_LOCALE, MAT_MOMENT_DATE_ADAPTER_OPTIONS],
    },
    { provide: MAT_DATE_FORMATS, useValue: MY_FORMATS },
    { provide: MAT_DATE_LOCALE, useValue: &#x27;ru-RU&#x27; },
  ],
  animations: [inOutComponentAnimation],
})
export class ProfileComponent implements OnInit, OnDestroy {
  /**
   * Текущие данные профиля
   */
  public profile$$: BehaviorSubject&lt;IAccount&gt;

  /**
   * Запрос на получение профиля
   */
  private profileQuery: QueryRef&lt;
    { account: IAccount &amp; { avatar: { url: string } } },
    { login: string | null }
  &gt; | null &#x3D; null

  /**
   * Флаг онлайна пользователя
   */
  public isOnline: boolean &#x3D; false

  /**
   * Флаг владения этим аккаунтом
   */
  public isMe: boolean &#x3D; false

  /**
   * Форма профиля
   */
  public profileForm &#x3D; new FormGroup({
    username: new FormControl(
      { value: &#x27;&#x27;, disabled: true },
      {
        validators: [
          Validators.required,
          Validators.minLength(4),
          Validators.pattern(
            /^[A-Z, А-Я][a-z, а-я, ё]+\s[A-Z, А-Я][a-z, а-я, ё]+$/,
          ),
        ],
      },
    ),
    login: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.minLength(4),
      Validators.pattern(/^[A-Z, a-z, 0-9]+\S$/),
    ]),
    email: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.email,
      Validators.minLength(6),
    ]),
    phone: new FormControl({ value: &#x27;&#x27;, disabled: true }, [
      Validators.required,
      Validators.minLength(6),
      Validators.pattern(/^\d{1,1}\s\d{3,3}\s\d{3,3}\s\d{2,2}\s\d{2,2}$/),
    ]),
    birthday: new FormControl(
      { value: &#x27;&#x27;, disabled: true },
      Validators.required,
    ),
  })

  /**
   * Флаг просмотра администратором
   */
  public supervisedByAdmin$$: Subject&lt;boolean&gt; &#x3D; new Subject&lt;boolean&gt;()

  /**
   * Отслеживаемый логин
   */
  public changedLogin$$: Subject&lt;string&gt; &#x3D; new Subject&lt;string&gt;()

  /**
   * Отслеживаемое имя пользователя
   */
  public changedUsername$$: Subject&lt;string&gt; &#x3D; new Subject&lt;string&gt;()

  /**
   * Отслеживаемый мобильный номер
   */
  public changedPhone$$: Subject&lt;string&gt; &#x3D; new Subject&lt;string&gt;()

  /**
   * Отслеживаемый email
   */
  public changedEmail$$: Subject&lt;string&gt; &#x3D; new Subject&lt;string&gt;()

  /**
   * Отслеживаемая дата рождения
   */
  public changedBirthday$$: Subject&lt;Moment&gt; &#x3D; new Subject&lt;Moment&gt;()

  /**
   * Разрешённые типы файла
   */
  public avatarTypes: string &#x3D; imageMimeTypes.join(&#x27;,&#x27;)

  /**
   * Прогресс загрузки файла
   */
  public uploadProgress: number | null &#x3D; null

  /** Флаг ошибки изменения данных */
  private isFailedChangeEvent: boolean &#x3D; false

  /**
   * Подписка на изменение данных аккаунта
   */
  private profileSub: Subscription | null &#x3D; null

  /**
   * Подписка на загрузку аватара
   */
  private uploadSub: Subscription | null &#x3D; null

  /**
   * Подписка на подтверждение загрузки аватара
   */
  private acceptUploadSub: Subscription | null &#x3D; null

  /** Подписка на обновление авторизационных данных аккаунта */
  private authSub: Subscription | null &#x3D; null

  /**
   * Массив вторичных подписок внутри методов изменения
   */
  private otherChangeSubs: Subscription[] &#x3D; []

  /**
   * Конструктор компонента аккаунта
   * @param {AuthService} authService Сервис авторизации
   * @param {ToastService} toastService Сервис уведомлений
   * @param {Apollo} apolloService Сервис Apollo
   * @param {Title} titleService Сервис заголовка страницы
   * @param {Router} routerService Сервис роутинга
   * @param {ActivatedRoute} route Текущий маршрут приложения
   * @param {HttpClient} httpClient HTTP-клиент
   */
  constructor(
    private authService: AuthService,
    private toastService: ToastService,
    private apolloService: Apollo,
    private titleService: Title,
    private routerService: Router,
    private route: ActivatedRoute,
    private httpClient: HttpClient,
    private dialogService: MatDialog,
  ) {
    // Инициализация пустого аккаунта
    let initial &#x3D; initialAccount

    // Логин нужного аккаунта
    let target &#x3D; this.route.snapshot.params[&#x27;login&#x27;]

    // Текущий пользователь ИС
    let currentUser &#x3D; this.authService.currentUser

    // Проверка на свою страницу
    if (target &amp;&amp; currentUser &amp;&amp; currentUser.login &#x3D;&#x3D;&#x3D; target) {
      this.isMe &#x3D; true
    }

    // Смена доступности формы в зависимости от роли пользователя
    this.otherChangeSubs.push(
      this.supervisedByAdmin$$.subscribe((val) &#x3D;&gt; {
        Object.keys(this.profileForm.controls).forEach((item) &#x3D;&gt;
          val
            ? this.profileForm.controls[item].enable()
            : this.profileForm.controls[item].disable(),
        )
      }),
    )

    this.supervisedByAdmin$$.next(currentUser?.role &#x3D;&#x3D;&#x3D; &#x27;ADMIN&#x27;)

    if (this.isMe) {
      this.profileForm.controls[&#x27;birthday&#x27;].enable()
      this.profileForm.controls[&#x27;phone&#x27;].enable()
    }

    // Установка параметров запроса аккаунта
    if (currentUser &amp;&amp; this.isMe) {
      initial &#x3D; { ...initial, ...this.authService.currentUser }
    } else if (currentUser) {
      initial &#x3D; { ...initial, login: target }
    }

    this.profile$$ &#x3D; new BehaviorSubject(initial)
  }

  /**
   * Метод получения аккаунта при инициализации компонента
   */
  ngOnInit(): void {
    this.profileQuery &#x3D; this.apolloService.watchQuery({
      query: GET_PROFILE,
      variables: {
        login: this.profile$$.value.login,
      },
      errorPolicy: &#x27;ignore&#x27;,
    })

    this.profileSub &#x3D; this.profileQuery.valueChanges.subscribe({
      next: ({ data }) &#x3D;&gt; {
        if (!data) {
          this.toastService.show(&#x27;Пользователь не найден&#x27;)
          this.routerService.navigate([&#x27;/&#x27;])

          return
        }

        this.profile$$.next({
          ...this.profile$$.value,
          ...data.account,
          avatar: data.account.avatar.url || &#x27;/assets/media/ava-default.webp&#x27;,
          birthday: data.account.birthday ? data.account.birthday : null,
        })

        let profile &#x3D; this.profile$$.value

        if (
          profile.team?._id &#x3D;&#x3D;&#x3D; this.authService.currentUser?.team?._id &amp;&amp;
          this.authService.currentUser?.role &#x3D;&#x3D;&#x3D; ROLE.HEAD
        ) {
          this.supervisedByAdmin$$.next(true)
        }

        this.profileForm.controls[&#x27;username&#x27;].setValue(profile.username)
        this.profileForm.controls[&#x27;email&#x27;].setValue(profile.email)
        this.profileForm.controls[&#x27;phone&#x27;].setValue(profile.phone)
        this.profileForm.controls[&#x27;login&#x27;].setValue(profile.login)
        this.profileForm.controls[&#x27;birthday&#x27;].setValue(moment(profile.birthday))

        this.titleService.setTitle(profile.login ? profile.login : &#x27;Профиль&#x27;)

        // Отслеживаем изменение логина
        this.changedLogin$$
          .asObservable()
          .pipe(debounceTime(CHANGE_TIMEOUT))
          .subscribe((value) &#x3D;&gt; {
            if (
              this.profileForm.controls[&#x27;login&#x27;].valid &amp;&amp;
              this.profileForm.controls[&#x27;login&#x27;].value !&#x3D;&#x3D;
                this.profile$$.value.login &amp;&amp;
              !this.isFailedChangeEvent
            )
              this.changeLogin(value)

            if (this.isFailedChangeEvent) {
              this.isFailedChangeEvent &#x3D; false
            }
          })

        // Отслеживаем изменение имени пользователя
        this.changedUsername$$
          .asObservable()
          .pipe(debounceTime(CHANGE_TIMEOUT))
          .subscribe((value) &#x3D;&gt; {
            if (
              this.profileForm.controls[&#x27;username&#x27;].valid &amp;&amp;
              this.profileForm.controls[&#x27;username&#x27;].value !&#x3D;&#x3D;
                this.profile$$.value.username &amp;&amp;
              !this.isFailedChangeEvent
            )
              this.changeUsername(value)

            if (this.isFailedChangeEvent) {
              this.isFailedChangeEvent &#x3D; false
            }
          })

        // Отслеживаем изменение мобильного номера
        this.changedPhone$$
          .asObservable()
          .pipe(debounceTime(CHANGE_TIMEOUT))
          .subscribe((value) &#x3D;&gt; {
            if (
              this.profileForm.controls[&#x27;phone&#x27;].valid &amp;&amp;
              this.profileForm.controls[&#x27;phone&#x27;].value !&#x3D;&#x3D;
                this.profile$$.value.phone &amp;&amp;
              !this.isFailedChangeEvent
            )
              this.changePhone(value)

            if (this.isFailedChangeEvent) {
              this.isFailedChangeEvent &#x3D; false
            }
          })

        // Отслеживаем изменение email
        this.changedEmail$$
          .asObservable()
          .pipe(debounceTime(CHANGE_TIMEOUT))
          .subscribe((value) &#x3D;&gt; {
            if (
              this.profileForm.controls[&#x27;email&#x27;].valid &amp;&amp;
              this.profileForm.controls[&#x27;email&#x27;].value !&#x3D;&#x3D;
                this.profile$$.value.email &amp;&amp;
              !this.isFailedChangeEvent
            )
              this.changeEmail(value)

            if (this.isFailedChangeEvent) {
              this.isFailedChangeEvent &#x3D; false
            }
          })

        // Отслеживаем изменение даты рождения
        this.changedBirthday$$
          .asObservable()
          .pipe(debounceTime(CHANGE_TIMEOUT))
          .subscribe((value) &#x3D;&gt; {
            if (
              this.profileForm.controls[&#x27;birthday&#x27;].valid &amp;&amp;
              this.profileForm.controls[&#x27;birthday&#x27;].value.toISOString() !&#x3D;&#x3D;
                this.profile$$.value.birthday &amp;&amp;
              !this.isFailedChangeEvent
            )
              this.changeBirthday(value.toDate())

            if (this.isFailedChangeEvent) {
              this.isFailedChangeEvent &#x3D; false
            }
          })
      },
    })
  }

  /**
   * Обработка события изменения логина
   * @param {string} val Новое значение логина
   * @returns {void}
   */
  public handleChangeLogin(val: string): void {
    if (val.trim().length &#x3D;&#x3D;&#x3D; 0 || !this.profileForm.controls[&#x27;login&#x27;].valid)
      return

    this.changedLogin$$.next(val)
  }

  /**
   * Обработка изменения логина
   * @param {string} val Новое значение логина
   * @returns {void}
   */
  public changeLogin(val: string): void {
    this.otherChangeSubs.push(
      this.toastService
        .show(&#x27;Изменить логин?&#x27;, &#x27;Да&#x27;, 3)
        .onAction()
        .subscribe(() &#x3D;&gt;
          this.mutate&lt;
            { changeAccount: { login: string } },
            { login: string; newLogin: string }
          &gt;(CHANGE_LOGIN, {
            login: this.profile$$.value.login || &#x27;&#x27;,
            newLogin: val,
          }).subscribe({
            error: () &#x3D;&gt; {
              this.toastService.show(
                &#x27;Ошибка при изменении логина&#x27;,
                undefined,
                2,
              )

              this.isFailedChangeEvent &#x3D; true

              this.profileForm.controls[&#x27;login&#x27;].setValue(
                this.profile$$.value.login,
              )
            },
            next: ({ data }) &#x3D;&gt; {
              this.profile$$.next({
                ...this.profile$$.value,
                login: data?.changeAccount.login || &#x27;&#x27;,
              })

              this.toastService.show(&#x27;Логин успешно изменён&#x27;, undefined, 2)

              if (this.isMe) {
                this.otherChangeSubs.push(
                  this.authService.me().subscribe((payload) &#x3D;&gt; {
                    this.routerService
                      .navigate([&#x60;/u/${data?.changeAccount.login}&#x60;])
                      .then(() &#x3D;&gt;
                        this.titleService.setTitle(
                          data?.changeAccount.login || &#x27;Профиль&#x27;,
                        ),
                      )
                  }),
                )
              }
            },
          }),
        ),
    )
  }

  /**
   * Обработка события изменения имени пользователя
   * @param {string} val Новое значение имени пользователя
   * @returns {void}
   */
  public handleChangeUsername(val: string): void {
    if (val.trim().length &#x3D;&#x3D;&#x3D; 0 || !this.profileForm.controls[&#x27;username&#x27;].valid)
      return

    this.changedUsername$$.next(val)
  }

  /**
   * Обработка изменения имени пользователя
   * @param {string} val Новое значение имени пользователя
   * @returns {void}
   */
  public changeUsername(val: string): void {
    const firstname &#x3D; val.split(&#x27; &#x27;)[0]
    const surname &#x3D; val.split(&#x27; &#x27;)[1]

    this.otherChangeSubs.push(
      this.toastService
        .show(&#x27;Изменить имя пользователя?&#x27;, &#x27;Да&#x27;, 3)
        .onAction()
        .subscribe(() &#x3D;&gt;
          this.mutate&lt;
            { changeAccount: { firstname: string; surname: string } },
            { login: string; firstname: string; surname: string }
          &gt;(CHANGE_USERNAME, {
            login: this.profile$$.value.login || &#x27;&#x27;,
            firstname,
            surname,
          }).subscribe({
            error: () &#x3D;&gt; {
              this.toastService.show(
                &#x27;Ошибка при изменении имени пользователя&#x27;,
                undefined,
                2,
              )

              this.isFailedChangeEvent &#x3D; true

              this.profileForm.controls[&#x27;username&#x27;].setValue(
                this.profile$$.value.username,
              )
            },
            next: ({ data }) &#x3D;&gt; {
              this.profile$$.next({
                ...this.profile$$.value,
                username: &#x60;${data?.changeAccount.firstname} ${data?.changeAccount.surname}&#x60;,
              })

              this.toastService.show(
                &#x27;Имя пользователя успешно изменено&#x27;,
                undefined,
                2,
              )

              if (this.isMe) {
                this.otherChangeSubs.push(this.authService.me().subscribe())
              }
            },
          }),
        ),
    )
  }

  /**
   * Обработка события изменения мобильного номера
   * @param {string} val Новое значение мобильного номера
   * @returns {void}
   */
  public handleChangePhone(val: string): void {
    if (val.trim().length &#x3D;&#x3D;&#x3D; 0 || !this.profileForm.controls[&#x27;phone&#x27;].valid)
      return

    this.changedPhone$$.next(val)
  }

  /**
   * Обработка изменения своего мобильного номера
   * @param {string} val Новое значение мобильного номера
   * @returns {void}
   */
  public changePhone(val: string): void {
    this.otherChangeSubs.push(
      this.toastService
        .show(&#x27;Изменить мобильный номер?&#x27;, &#x27;Да&#x27;, 3)
        .onAction()
        .subscribe(() &#x3D;&gt; {
          this.isMe
            ? this.mutate&lt;
                { changeYourself: { phone: string } },
                { phone: string }
              &gt;(CHANGE_YOURSELF_PHONE, { phone: val }).subscribe({
                error: () &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении мобильного номера&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;phone&#x27;].setValue(
                    this.profile$$.value.phone,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    phone: data?.changeYourself.phone || &#x27;&#x27;,
                  })

                  this.toastService.show(
                    &#x27;Мобильный номер успешно изменён&#x27;,
                    undefined,
                    2,
                  )
                },
              })
            : this.mutate&lt;
                { changeAccount: { phone: string } },
                { login: string; phone: string }
              &gt;(CHANGE_PHONE, {
                login: this.profile$$.value.login || &#x27;&#x27;,
                phone: val,
              }).subscribe({
                error: () &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении мобильного номера&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;phone&#x27;].setValue(
                    this.profile$$.value.phone,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    phone: data?.changeAccount.phone || &#x27;&#x27;,
                  })

                  this.toastService.show(
                    &#x27;Мобильный номер успешно изменён&#x27;,
                    undefined,
                    2,
                  )
                },
              })
        }),
    )
  }

  /**
   * Обработка события изменения email
   * @param {string} val Новое значение email
   * @returns {void}
   */
  public handleChangeEmail(val: string): void {
    if (val.trim().length &#x3D;&#x3D;&#x3D; 0 || !this.profileForm.controls[&#x27;email&#x27;].valid)
      return

    this.changedEmail$$.next(val)
  }

  /**
   * Обработка изменения email
   * @param {string} val Новое значение email
   * @returns {void}
   */
  public changeEmail(val: string): void {
    this.otherChangeSubs.push(
      this.toastService
        .show(&#x27;Изменить email?&#x27;, &#x27;Да&#x27;, 3)
        .onAction()
        .subscribe(() &#x3D;&gt;
          this.isMe
            ? this.mutate&lt;
                { changeYourself: { email: string } },
                { email: string }
              &gt;(CHANGE_YOURSELF_EMAIL, {
                email: val,
              }).subscribe({
                error: (err) &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении почты&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;email&#x27;].setValue(
                    this.profile$$.value.email,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    email: data?.changeYourself.email || &#x27;&#x27;,
                  })

                  this.toastService.show(&#x27;Почта успешно изменена&#x27;, undefined, 2)
                },
              })
            : this.mutate&lt;
                { changeAccount: { email: string } },
                { login: string; email: string }
              &gt;(CHANGE_EMAIL, {
                login: this.profile$$.value.email || &#x27;&#x27;,
                email: val,
              }).subscribe({
                error: (err) &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении почты&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;email&#x27;].setValue(
                    this.profile$$.value.email,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    email: data?.changeAccount.email || &#x27;&#x27;,
                  })

                  this.toastService.show(&#x27;Почта успешно изменена&#x27;, undefined, 2)
                },
              }),
        ),
    )
  }

  /**
   * Обработка события изменения даты рождения
   * @param {string} val Новое значение даты рождения
   * @returns {void}
   */
  public handleChangeBirthday(val: Moment): void {
    if (!this.profileForm.controls[&#x27;birthday&#x27;].valid) return

    this.changedBirthday$$.next(val)
  }

  /**
   * Обработка изменения даты рождения
   * @param {string} val Новое значение даты рождения
   * @returns {void}
   */
  public changeBirthday(val: Date): void {
    this.otherChangeSubs.push(
      this.toastService
        .show(&#x27;Изменить дату рождения?&#x27;, &#x27;Да&#x27;, 3)
        .onAction()
        .subscribe(() &#x3D;&gt;
          this.isMe
            ? this.mutate&lt;
                { changeYourself: { birthday: string } },
                { birthday: string }
              &gt;(CHANGE_YOURSELF_BIRTHDAY, {
                birthday: val.toISOString(),
              }).subscribe({
                error: () &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении даты рождения&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;birthday&#x27;].setValue(
                    this.profile$$.value.birthday,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    birthday: data?.changeYourself.birthday || &#x27;&#x27;,
                  })

                  this.toastService.show(
                    &#x27;Дата рождения успешно изменена&#x27;,
                    undefined,
                    2,
                  )
                },
              })
            : this.mutate&lt;
                { changeAccount: { birthday: string } },
                { login: string; birthday: string }
              &gt;(CHANGE_BIRTHDAY, {
                login: this.profile$$.value.login || &#x27;&#x27;,
                birthday: val.toISOString(),
              }).subscribe({
                error: () &#x3D;&gt; {
                  this.toastService.show(
                    &#x27;Ошибка при изменении даты рождения&#x27;,
                    undefined,
                    2,
                  )

                  this.isFailedChangeEvent &#x3D; true

                  this.profileForm.controls[&#x27;birthday&#x27;].setValue(
                    this.profile$$.value.birthday,
                  )
                },
                next: ({ data }) &#x3D;&gt; {
                  this.profile$$.next({
                    ...this.profile$$.value,
                    birthday: data?.changeAccount.birthday || &#x27;&#x27;,
                  })

                  this.toastService.show(
                    &#x27;Дата рождения успешно изменена&#x27;,
                    undefined,
                    2,
                  )
                },
              }),
        ),
    )
  }

  /**
   * Обработка клика на смену пароля
   * @returns {void}
   */
  public handleChangePass(): void {
    this.dialogService.open(ChangePassComponent, {
      width: &#x27;300px&#x27;,
    })
  }

  /**
   * Обработчик клика для смены аватара
   */
  public handleClickFile(event: Event): void {
    if (!!this.uploadProgress) {
      this.cancelUpload()

      event.preventDefault()
      return
    }
  }

  /**
   * Обработчик выбора файла для загрузки
   * @param {any} event Событие выбора
   */
  public handleSelectFile(event: any): void {
    if (!(this.isMe || this.supervisedByAdmin$$)) {
      return
    }

    let file: File &#x3D; event.target.files[0]

    // Проверка на выбор файла
    if (!file) return

    // Проверка на валидность типа файла
    if (!imageMimeTypes.find((item) &#x3D;&gt; item &#x3D;&#x3D;&#x3D; file.type)) {
      this.toastService.show(&#x27;Неверный тип файла&#x27;)
      return
    }

    // Проверка на текущее подтверждение загрузки
    if (this.acceptUploadSub) this.acceptUploadSub.unsubscribe()

    // Подтверждение загрузки аватара
    this.acceptUploadSub &#x3D; this.toastService
      .show(
        &#x60;Обновить аватар на ${file.name.slice(0, file.name.lastIndexOf(&#x27;.&#x27;))}?&#x60;,
        &#x27;OK&#x27;,
        10,
      )
      .onAction()
      .subscribe(() &#x3D;&gt; this.uploadAvatar(file))
  }

  /**
   * Абстрактный метод изменения данных профиля
   * @param {TypedDocument&lt;TResult, TVars&gt;} mutation Мутация в виде gql
   * @param {TVars} variables Объект с переменными запроса
   * @returns {Observable&lt;MutationResult&lt;TResult&gt;&gt;} Observable GraphQL-запроса на мутацию
   */
  private mutate&lt;TResult, TVars&gt;(
    mutation: TypedDocumentNode&lt;TResult, TVars&gt;,
    variables: TVars,
  ): Observable&lt;MutationResult&lt;TResult&gt;&gt; {
    return this.apolloService.mutate({
      mutation,
      variables,
    })
  }

  /**
   * Метод загрузки аватара
   * @param {File} file Выбранный файл
   */
  private uploadAvatar(file: File): void {
    const formData &#x3D; new FormData()

    formData.append(&#x27;file&#x27;, file)

    const upload$ &#x3D; this.httpClient
      .put&lt;IUpload&gt;(ENV.API_HOST + API.UPLOADS_AVATAR, formData, {
        reportProgress: true,
        observe: &#x27;events&#x27;,
        withCredentials: true,
        params: {
          u: this.profile$$.value.login || &#x27;&#x27;,
        },
      })
      .pipe(
        finalize(() &#x3D;&gt; this.reset()),
        catchError((err) &#x3D;&gt; {
          console.log(err)

          this.reset()

          return of(null)
        }),
      )

    this.uploadSub &#x3D; upload$.subscribe((event) &#x3D;&gt; {
      if (!event) {
        return
      }

      if (event.type &#x3D;&#x3D; HttpEventType.UploadProgress) {
        this.uploadProgress &#x3D; Math.round(
          100 * (event.loaded / (event.total || 1)),
        )
      }

      if (event.type &#x3D;&#x3D; HttpEventType.Response) {
        let uploadedFile &#x3D; event.body

        if (uploadedFile) {
          this.authSub &#x3D; this.authService.me().subscribe(() &#x3D;&gt; {})
          this.profileQuery?.refetch()
          this.toastService.show(&#x27;Аватар успешно изменён&#x27;)
        }
      }
    })
  }

  /**
   * Метод отмены загрузки аватара
   */
  private cancelUpload(): void {
    this.uploadSub?.unsubscribe()
    this.reset()
  }

  /**
   * Метод локализации роли
   * @param {ROLE} role Системная роль пользователя
   * @returns {string} Русифицированная роль
   */
  public translateRole(role: ROLE): string {
    return IntlRole[role]
  }

  /**
   * Откат загрузки
   */
  private reset(): void {
    this.uploadProgress &#x3D; null
    this.uploadSub &#x3D; null
  }

  /**
   * Отмена подписки на изменение аккаунта при размонтировании компонента
   */
  ngOnDestroy(): void {
    this.profileSub?.unsubscribe()
    this.uploadSub?.unsubscribe()
    this.acceptUploadSub?.unsubscribe()
    this.authSub?.unsubscribe()
    this.changedPhone$$.unsubscribe()
    this.changedBirthday$$.unsubscribe()
    this.changedEmail$$.unsubscribe()
    this.changedLogin$$.unsubscribe()
    this.changedUsername$$.unsubscribe()

    this.otherChangeSubs.forEach((item) &#x3D;&gt; item.unsubscribe())
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-templateData">
        <pre class="line-numbers"><code class="language-html">&lt;section @inOutComponent class&#x3D;&quot;profile&quot; [formGroup]&#x3D;&quot;profileForm&quot;&gt;
  &lt;div class&#x3D;&quot;profile-card&quot;&gt;
    &lt;div
      class&#x3D;&quot;profile-card__avatar&quot;
      [attr.data-online]&#x3D;&quot;isOnline&quot;
      [attr.data-editable]&#x3D;&quot;isMe || supervisedByAdmin$$&quot;
      [attr.data-loading]&#x3D;&quot;!!uploadProgress&quot;
      (click)&#x3D;&quot;avatarUpload.click()&quot;
    &gt;
      &lt;img
        [src]&#x3D;&quot;profile$$.value.avatar&quot;
        width&#x3D;&quot;200px&quot;
        height&#x3D;&quot;200px&quot;
        [alt]&#x3D;&quot;&#x27;Аватар: &#x27; + (profile$$.value.username || profile$$.value.login)&quot;
      /&gt;
      &lt;input
        type&#x3D;&quot;file&quot;
        class&#x3D;&quot;profile-card__avatar--control&quot;
        [accept]&#x3D;&quot;avatarTypes&quot;
        #avatarUpload
        (change)&#x3D;&quot;handleSelectFile($event)&quot;
        (click)&#x3D;&quot;handleClickFile($event)&quot;
      /&gt;
      &lt;div class&#x3D;&quot;profile-card-progress&quot; *ngIf&#x3D;&quot;uploadProgress&quot; @inOutComponent&gt;
        &lt;mat-progress-spinner
          mode&#x3D;&quot;indeterminate&quot;
          class&#x3D;&quot;profile-card-progress__spinner&quot;
        &gt;&lt;/mat-progress-spinner&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;profile-card__roles&quot;&gt;
      &lt;div *ngIf&#x3D;&quot;profile$$.value.role&quot;&gt;
        {{ translateRole(profile$$.value.role) }}
      &lt;/div&gt;
      &lt;div
        *ngIf&#x3D;&quot;isMe&quot;
        class&#x3D;&quot;profile-card__roles--option&quot;
        (click)&#x3D;&quot;handleChangePass()&quot;
      &gt;
        Пароль
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class&#x3D;&quot;profile-desc&quot;&gt;
    &lt;div class&#x3D;&quot;profile-desc-info&quot;&gt;
      &lt;div class&#x3D;&quot;profile-desc-info__field&quot;&gt;
        &lt;input
          type&#x3D;&quot;text&quot;
          formControlName&#x3D;&quot;username&quot;
          (ngModelChange)&#x3D;&quot;handleChangeUsername($event)&quot;
        /&gt;
        &lt;input
          type&#x3D;&quot;text&quot;
          formControlName&#x3D;&quot;login&quot;
          (ngModelChange)&#x3D;&quot;handleChangeLogin($event)&quot;
        /&gt;
      &lt;/div&gt;
      &lt;div class&#x3D;&quot;profile-desc-info__field&quot;&gt;
        &lt;input
          type&#x3D;&quot;text&quot;
          formControlName&#x3D;&quot;email&quot;
          (ngModelChange)&#x3D;&quot;handleChangeEmail($event)&quot;
        /&gt;
        &lt;img src&#x3D;&quot;/assets/svg/email-min.svg&quot; alt&#x3D;&quot;Icon: Email&quot; /&gt;
      &lt;/div&gt;
      &lt;div class&#x3D;&quot;profile-desc-info__field&quot;&gt;
        &lt;input
          type&#x3D;&quot;text&quot;
          formControlName&#x3D;&quot;phone&quot;
          (ngModelChange)&#x3D;&quot;handleChangePhone($event)&quot;
        /&gt;
        &lt;img src&#x3D;&quot;/assets/svg/phone-min.svg&quot; alt&#x3D;&quot;Icon: Phone&quot; /&gt;
      &lt;/div&gt;
      &lt;div class&#x3D;&quot;profile-desc-info__field&quot;&gt;
        &lt;div&gt;
          &lt;input
            [matDatepicker]&#x3D;&quot;picker&quot;
            formControlName&#x3D;&quot;birthday&quot;
            class&#x3D;&quot;profile-desc-info__field--date&quot;
            (ngModelChange)&#x3D;&quot;handleChangeBirthday($event)&quot;
          /&gt;
          &lt;mat-datepicker-toggle
            matSuffix
            [for]&#x3D;&quot;picker&quot;
            [style]&#x3D;&quot;!isMe || !supervisedByAdmin$$ ? { display: &#x27;none&#x27; } : {}&quot;
          &gt;&lt;/mat-datepicker-toggle&gt;
          &lt;mat-datepicker touchUi #picker&gt;&lt;/mat-datepicker&gt;
        &lt;/div&gt;
        &lt;img src&#x3D;&quot;/assets/svg/cake-min.svg&quot; alt&#x3D;&quot;Icon: Birthday&quot; /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-styleData">
                <p class="comment">
                    <code>./profile.component.sass</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">@import &#x27;../../../styles/_main&#x27;
@import &quot;../../../styles/_vars&quot;

.profile
    display: grid
    padding: 0 30px

    grid-template-columns: max-content 1fr
    align-items: center

    &amp; &gt; div, &amp;-card__roles, &amp;-desc-info, &amp;-desc-info__field
        display: flex

    &amp;-card input, &amp;-desc input
        padding: 10px 0
        border-color: transparent

    &amp;-card
        padding: 0 30px
        align-items: center

        &amp;, &amp;__roles
            flex-direction: column

        &amp;-progress
            top: 0
            left: 0
            right: 0
            bottom: 0

            border-radius: 50%
            background: rgba($color-background, .5)

            &amp;, &amp;__spinner
                position: absolute

            &amp;__spinner
                top: 50%
                left: 50%
                transform: translate(-50%, -50%)

        &amp;__avatar
            position: relative

            &amp;, &amp; &gt; img
                height: 200px
                width: 200px

            &amp;--control
                display: none

            &amp;[data-online&#x3D;&quot;true&quot;]::before
                content: &#x27;&#x27;
                position: absolute
                right: 0
                top: 0
                background: $color-primary
                border-radius: 50%
                width: 46px
                height: 46px

            &amp;[data-editable&#x3D;&quot;true&quot;]
                cursor: pointer

                &amp;:after
                    content: &#x27;Изменить&#x27;
                    position: absolute
                    top: 0
                    left: 0
                    right: 0
                    bottom: 0
                    color: transparent
                    background: rgba($color-primary, 0)
                    border-radius: 50%
                    transition: .3s
                    display: flex
                    align-items: center
                    justify-content: center

                &amp;:hover:after
                    color: #fff
                    background: rgba($color-primary, .5)

            &amp;[data-loading&#x3D;&quot;true&quot;]
                &amp;:after
                    content: &#x27;Отмена&#x27;

            &amp; &gt; img
                border: 2px solid $color-primary-42
                border-radius: 50%

                user-select: none

        &amp;__roles
            padding: 25px 0 20px
            align-items: center

            &amp; &gt; div
                padding: 5px 15px
                border: 2px solid $color-primary-light
                border-radius: 7px

                color: #fff
                font-size: 14px
                user-select: none
                text-align: center

                width: 100%

                &amp;:not(:last-child)
                    margin-bottom: 15px

            &amp;--option
                color: $color-primary !important
                cursor: pointer
                opacity: .5
                transition: .3s

                &amp;:hover
                    opacity: 1

    &amp;-desc
        justify-content: center

        &amp;-info
            width: 100%
            max-width: 900px
            justify-content: space-around
            padding: 0 10px

            flex-wrap: wrap

            &amp; &gt; div
                padding: 20px 10px

                &amp;:first-child  &gt; input
                    &amp;:first-child
                        margin-top: 12px
                        font-size: 20px
                        font-weight: $fw-bold
                        padding-top: 0
                        margin-bottom: 5px
                        padding-bottom: 5px

                    &amp;:last-child
                        font-size: 16px
                        margin: 0
                        padding-top: 0

            &amp;__field
                flex-direction: column
                justify-content: center
                align-items: center
                max-width: 210px

                &amp;--date
                    width: 150px

                &amp; &gt; input, &amp; &gt; span
                    text-align: center
                    font-size: 16px
                    display: block
                    margin-bottom: 5px

                &amp; &gt; input.ng-invalid.ng-dirty
                    border-color: $color-primary-carrot

                &amp; input
                    border-bottom: 1px solid transparent
                    text-align: center
                    padding: 10px 0 8px 0
                    margin-bottom: 9px
                    transition: .2s

                &amp; &gt; span
                    padding: 10px

                &amp; a
                    color: #fff
                    transition: .2s

                    &amp;:hover
                        color: $color-primary

                &amp; img
                    max-width: 25px
                    max-height: 20px

@media only screen and (max-width: 768px)
    .profile
        grid-template-columns: 1fr
        grid-template-rows: max-content 1fr

        &amp;-card
            align-items: center

@media only screen and (max-width: 576px)
    .profile
        padding: 0
</code></pre>
    </div>

    <div class="tab-pane fade " id="c-tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><section @inOutComponent class="profile" [formGroup]="profileForm">  <div class="profile-card">    <div      class="profile-card__avatar"      [attr.data-online]="isOnline"      [attr.data-editable]="isMe || supervisedByAdmin$$"      [attr.data-loading]="!!uploadProgress"      (click)="avatarUpload.click()"    >      <img        [src]="profile$$.value.avatar"        width="200px"        height="200px"        [alt]="\'Аватар: \' + (profile$$.value.username || profile$$.value.login)"      />      <input        type="file"        class="profile-card__avatar--control"        [accept]="avatarTypes"        #avatarUpload        (change)="handleSelectFile($event)"        (click)="handleClickFile($event)"      />      <div class="profile-card-progress" *ngIf="uploadProgress" @inOutComponent>        <mat-progress-spinner          mode="indeterminate"          class="profile-card-progress__spinner"        ></mat-progress-spinner>      </div>    </div>    <div class="profile-card__roles">      <div *ngIf="profile$$.value.role">        {{ translateRole(profile$$.value.role) }}      </div>      <div        *ngIf="isMe"        class="profile-card__roles--option"        (click)="handleChangePass()"      >        Пароль      </div>    </div>  </div>  <div class="profile-desc">    <div class="profile-desc-info">      <div class="profile-desc-info__field">        <input          type="text"          formControlName="username"          (ngModelChange)="handleChangeUsername($event)"        />        <input          type="text"          formControlName="login"          (ngModelChange)="handleChangeLogin($event)"        />      </div>      <div class="profile-desc-info__field">        <input          type="text"          formControlName="email"          (ngModelChange)="handleChangeEmail($event)"        />        <img src="/assets/svg/email-min.svg" alt="Icon: Email" />      </div>      <div class="profile-desc-info__field">        <input          type="text"          formControlName="phone"          (ngModelChange)="handleChangePhone($event)"        />        <img src="/assets/svg/phone-min.svg" alt="Icon: Phone" />      </div>      <div class="profile-desc-info__field">        <div>          <input            [matDatepicker]="picker"            formControlName="birthday"            class="profile-desc-info__field--date"            (ngModelChange)="handleChangeBirthday($event)"          />          <mat-datepicker-toggle            matSuffix            [for]="picker"            [style]="!isMe || !supervisedByAdmin$$ ? { display: \'none\' } : {}"          ></mat-datepicker-toggle>          <mat-datepicker touchUi #picker></mat-datepicker>        </div>        <img src="/assets/svg/cake-min.svg" alt="Icon: Birthday" />      </div>    </div>  </div></section></div>'
    var COMPONENTS = [{'name': 'AlarmsComponent', 'selector': 'vanne-alarms'},{'name': 'AppComponent', 'selector': 'vanne-root'},{'name': 'BgVideoComponent', 'selector': 'vanne-bg-video'},{'name': 'ChangePassComponent', 'selector': 'vanne-change-pass'},{'name': 'ChatsComponent', 'selector': 'vanne-chats'},{'name': 'DashboardComponent', 'selector': 'vanne-dashboard'},{'name': 'DebtsComponent', 'selector': 'vanne-debts'},{'name': 'HeaderComponent', 'selector': 'vanne-header'},{'name': 'LogoComponent', 'selector': 'vanne-logo'},{'name': 'NavComponent', 'selector': 'vanne-nav'},{'name': 'ProfileComponent', 'selector': 'vanne-profile'},{'name': 'ProgressComponent', 'selector': 'vanne-progress'},{'name': 'SettingsComponent', 'selector': 'vanne-settings'},{'name': 'SignInComponent', 'selector': 'vanne-sign-in'},{'name': 'UsersComponent', 'selector': 'vanne-users'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'ProfileComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'ProfileComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
